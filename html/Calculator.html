<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RiSync Super Calculator</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Math.js for robust math evaluation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.5.0/math.min.js"></script>
    <!-- Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --key-bg-dark: #2d3748;
            --key-bg-light: #f0f4f8;
            --key-hover-dark: #4a5568;
            --key-hover-light: #e2e8f0;
            --key-text-dark: #e2e8f0;
            --key-text-light: #2d3748;
            --op-bg-dark: #4a5568;
            --op-bg-light: #cbd5e0;
            --op-hover-dark: #636b76;
            --op-hover-light: #a0aec0;
            --main-bg-dark: #1f2937;
            --main-bg-light: #f3f4f6;
            --container-bg-dark: #374151;
            --container-bg-light: #ffffff;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--main-bg-light);
            transition: background-color 0.5s ease;
        }

        .dark body {
            background-color: var(--main-bg-dark);
        }

        .dark .bg-white {
            background-color: var(--container-bg-dark);
        }

        .dark .text-gray-900 {
            color: var(--key-text-dark);
        }

        .dark .bg-gray-100 {
            background-color: var(--key-bg-dark);
        }

        .dark .bg-gray-200 {
            background-color: var(--op-bg-dark);
        }

        .dark .hover\:bg-gray-200:hover {
            background-color: var(--key-hover-dark);
        }

        .dark .hover\:bg-gray-300:hover {
            background-color: var(--op-hover-dark);
        }

        .dark .bg-purple-600 {
            background-color: #7c3aed;
        }

        .dark .hover\:bg-purple-700:hover {
            background-color: #6d28d9;
        }

        .keypad-button {
            transition: all 0.2s ease;
        }

        .keypad-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .keypad-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tab-button {
            transition: all 0.3s ease;
            box-shadow: none;
        }

        .tab-button.active {
            box-shadow: inset 0 -4px 0 0 #8b5cf6;
            font-weight: 600;
        }

        .dark .tab-button.active {
            box-shadow: inset 0 -4px 0 0 #a78bfa;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center py-10">
    <!-- Logo and Back Button in a flex container -->
    <div class="absolute top-4 left-4 flex items-center space-x-4">
       <a href="../index.html" class="logo">
    <img src="../assets/logo.png" alt="RiSync Logo" style="width:80px; height:auto;">
</a>
      <a href="content.html" class="bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-4 py-2 rounded-full font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-300">
        Back
      </a>
    </div>

    <div class="calculator-container bg-white p-8 md:p-10 rounded-3xl shadow-2xl w-full max-w-sm mx-auto transform transition-transform duration-500">

        <!-- Theme Toggle Button -->
        <div class="flex justify-end mb-4">
            <button id="themeToggle" class="p-2 rounded-full text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-300">
                <svg id="theme-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                </svg>
            </button>
        </div>

        <!-- Tabbed Interface -->
        <div class="tabs flex space-x-2 mb-6 border-b border-gray-300 dark:border-gray-600">
            <button class="tab-button active flex-1 py-2 text-center text-sm font-medium text-gray-600 dark:text-gray-400 focus:outline-none" data-tab="calculator">Calculator</button>
            <button class="tab-button flex-1 py-2 text-center text-sm font-medium text-gray-600 dark:text-gray-400 focus:outline-none" data-tab="unit-converter">Units</button>
            <button class="tab-button flex-1 py-2 text-center text-sm font-medium text-gray-600 dark:text-gray-400 focus:outline-none" data-tab="currency-converter">Currency</button>
        </div>

        <!-- Main Calculator Section -->
        <div id="calculator-tab" class="tab-content transition-opacity duration-300">
            <!-- Display -->
            <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-xl shadow-inner mb-4">
                <div id="display-input" class="text-right text-sm text-gray-600 dark:text-gray-400 break-all h-6 overflow-hidden"></div>
                <div id="display-output" class="text-right text-3xl font-bold text-gray-900 dark:text-white break-all h-10 overflow-hidden">0</div>
            </div>

            <!-- Keypad -->
            <div class="grid grid-cols-5 gap-3">
                <!-- Scientific buttons -->
                <button class="keypad-button bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-semibold text-sm hover:bg-gray-300 dark:hover:bg-gray-600" data-value="sin(">sin</button>
                <button class="keypad-button bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-semibold text-sm hover:bg-gray-300 dark:hover:bg-gray-600" data-value="cos(">cos</button>
                <button class="keypad-button bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-semibold text-sm hover:bg-gray-300 dark:hover:bg-gray-600" data-value="tan(">tan</button>
                <button class="keypad-button bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-semibold text-sm hover:bg-gray-300 dark:hover:bg-gray-600" data-value="sqrt(">sqrt</button>
                <button class="keypad-button bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-semibold text-sm hover:bg-gray-300 dark:hover:bg-gray-600" data-value="log(">log</button>

                <!-- Standard calculator buttons -->
                <button class="keypad-button bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-300 dark:hover:bg-gray-600" data-value="C">C</button>
                <button class="keypad-button bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-300 dark:hover:bg-gray-600" data-value="←">←</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white rounded-xl p-4 text-center font-bold hover:bg-purple-700 dark:hover:bg-purple-800" data-value="/">/</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white rounded-xl p-4 text-center font-bold hover:bg-purple-700 dark:hover:bg-purple-800" data-value="*">*</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white rounded-xl p-4 text-center font-bold hover:bg-purple-700 dark:hover:bg-purple-800" data-value="-">-</button>

                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="7">7</button>
                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="8">8</button>
                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="9">9</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white row-span-2 rounded-xl p-4 text-center font-bold flex items-center justify-center hover:bg-purple-700 dark:hover:bg-purple-800" data-value="+">+</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white rounded-xl p-4 text-center font-bold hover:bg-purple-700 dark:hover:bg-purple-800" data-value="(">(</button>

                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="4">4</button>
                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="5">5</button>
                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="6">6</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white rounded-xl p-4 text-center font-bold hover:bg-purple-700 dark:hover:bg-purple-800" data-value=")">)</button>

                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="1">1</button>
                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="2">2</button>
                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="3">3</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white rounded-xl p-4 text-center font-bold hover:bg-purple-700 dark:hover:bg-purple-800" data-value=".">.</button>

                <button class="keypad-button bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 col-span-2 rounded-xl p-4 text-center font-bold hover:bg-gray-200 dark:hover:bg-gray-700" data-value="0">0</button>
                <button class="keypad-button bg-purple-600 dark:bg-purple-700 text-white rounded-xl p-4 text-center font-bold hover:bg-purple-700 dark:hover:bg-purple-800" data-value="=">=</button>
            </div>
        </div>

        <!-- Unit Converter Section -->
        <div id="unit-converter-tab" class="tab-content hidden transition-opacity duration-300">
            <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100 mb-4">Unit Converter</h2>

            <!-- Input and Dropdowns -->
            <div class="space-y-4">
                <div class="flex items-center space-x-2">
                    <label class="text-gray-600 dark:text-gray-400 font-medium">Category:</label>
                    <select id="unit-category" class="flex-1 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:ring focus:ring-purple-300 focus:outline-none">
                        <option value="length">Length</option>
                        <option value="mass">Mass</option>
                        <option value="volume">Volume</option>
                    </select>
                </div>
                <input type="number" id="unit-amount" class="w-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded-lg p-3 text-lg focus:ring focus:ring-purple-300 focus:outline-none" placeholder="Enter amount">

                <div class="flex items-center space-x-2">
                    <label class="text-gray-600 dark:text-gray-400 font-medium">From:</label>
                    <select id="unit-from" class="flex-1 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:ring focus:ring-purple-300 focus:outline-none"></select>
                </div>

                <div class="flex items-center space-x-2">
                    <label class="text-gray-600 dark:text-gray-400 font-medium">To:</label>
                    <select id="unit-to" class="flex-1 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:ring focus:ring-purple-300 focus:outline-none"></select>
                </div>

                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-xl text-center shadow-inner">
                    <p id="unit-result" class="text-xl font-bold text-gray-900 dark:text-gray-100">Result will appear here</p>
                </div>
            </div>
        </div>

        <!-- Currency Converter Section -->
        <div id="currency-converter-tab" class="tab-content hidden transition-opacity duration-300">
            <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100 mb-4">Currency Converter</h2>

            <!-- Input and Dropdowns -->
            <div class="space-y-4">
                <input type="number" id="currency-amount" class="w-full bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded-lg p-3 text-lg focus:ring focus:ring-purple-300 focus:outline-none" placeholder="Enter amount">

                <div class="flex items-center space-x-2">
                    <label class="text-gray-600 dark:text-gray-400 font-medium">From:</label>
                    <select id="currency-from" class="flex-1 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:ring focus:ring-purple-300 focus:outline-none"></select>
                </div>

                <div class="flex items-center space-x-2">
                    <label class="text-gray-600 dark:text-gray-400 font-medium">To:</label>
                    <select id="currency-to" class="flex-1 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded-lg p-2 focus:ring focus:ring-purple-300 focus:outline-none"></select>
                </div>

                <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-xl text-center shadow-inner">
                    <p id="currency-result" class="text-xl font-bold text-gray-900 dark:text-gray-100">Result will appear here</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('theme-icon');
            const tabs = document.querySelectorAll('.tab-button');
            const displayInput = document.getElementById('display-input');
            const displayOutput = document.getElementById('display-output');
            const keypadButtons = document.querySelectorAll('#calculator-tab .keypad-button');

            const unitCategory = document.getElementById('unit-category');
            const unitAmount = document.getElementById('unit-amount');
            const unitFrom = document.getElementById('unit-from');
            const unitTo = document.getElementById('unit-to');
            const unitResult = document.getElementById('unit-result');

            const currencyAmount = document.getElementById('currency-amount');
            const currencyFrom = document.getElementById('currency-from');
            const currencyTo = document.getElementById('currency-to');
            const currencyResult = document.getElementById('currency-result');

            let currentExpression = '';
            let isResultDisplayed = false;

            // --- Theme Toggle Logic ---
            const storedTheme = localStorage.getItem('theme');
            if (storedTheme === 'dark') {
                document.documentElement.classList.add('dark');
                themeIcon.innerHTML = `<path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 005.05 6.464zm-2.12 2.12a1 1 0 010-1.414l-.707-.707a1 1 0 011.414-1.414l.707.707a1 1 0 010 1.414zM3 11a1 1 0 100-2H2a1 1 0 100 2h1z"></path>`;
            } else {
                themeIcon.innerHTML = `<path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>`;
            }

            themeToggle.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                if (document.documentElement.classList.contains('dark')) {
                    localStorage.setItem('theme', 'dark');
                    themeIcon.innerHTML = `<path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 005.05 6.464zm-2.12 2.12a1 1 0 010-1.414l-.707-.707a1 1 0 011.414-1.414l.707.707a1 1 0 010 1.414zM3 11a1 1 0 100-2H2a1 1 0 100 2h1z"></path>`;
                } else {
                    localStorage.setItem('theme', 'light');
                    themeIcon.innerHTML = `<path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>`;
                }
            });

            // --- Tab Switching Logic ---
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.add('hidden');
                        content.classList.remove('opacity-100');
                    });
                    tabs.forEach(t => t.classList.remove('active'));
                    const targetTab = document.getElementById(tab.dataset.tab + '-tab');
                    targetTab.classList.remove('hidden');
                    // Force reflow for transition
                    void targetTab.offsetWidth;
                    targetTab.classList.add('opacity-100');
                    tab.classList.add('active');
                });
            });

            // --- Calculator Logic ---
            keypadButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const value = button.dataset.value;

                    // Handle different button types
                    if (value === 'C') {
                        currentExpression = '';
                        displayInput.textContent = '';
                        displayOutput.textContent = '0';
                    } else if (value === '←') {
                        currentExpression = currentExpression.slice(0, -1);
                        displayInput.textContent = currentExpression;
                        if (currentExpression === '') {
                            displayOutput.textContent = '0';
                        }
                    } else if (value === '=') {
                        try {
                            // Replace special characters for evaluation
                            const sanitizedExpression = currentExpression
                                .replace(/×/g, '*')
                                .replace(/÷/g, '/')
                                .replace(/sin\(/g, 'sin(')
                                .replace(/cos\(/g, 'cos(')
                                .replace(/tan\(/g, 'tan(');

                            const result = math.evaluate(sanitizedExpression);
                            displayOutput.textContent = isNaN(result) || !isFinite(result) ? 'Error' : parseFloat(result.toFixed(10));
                            currentExpression = String(result);
                            isResultDisplayed = true;
                        } catch (e) {
                            displayOutput.textContent = 'Error';
                            currentExpression = '';
                        }
                    } else {
                        if (isResultDisplayed && !['+', '-', '*', '/', '(', ')'].includes(value)) {
                            currentExpression = '';
                            isResultDisplayed = false;
                        }
                        currentExpression += value;
                        displayInput.textContent = currentExpression;
                    }
                });
            });

            // --- Unit Converter Logic ---
            const unitRates = {
                length: {
                    m: 1, km: 0.001, cm: 100, mm: 1000, mi: 0.000621371, yd: 1.09361, ft: 3.28084, inch: 39.3701
                },
                mass: {
                    g: 1, kg: 0.001, mg: 1000, lb: 0.00220462, oz: 0.035274
                },
                volume: {
                    l: 1, ml: 1000, gal: 0.264172, pt: 2.11338, cup: 4.16667
                }
            };

            const updateUnitDropdowns = () => {
                const category = unitCategory.value;
                const units = Object.keys(unitRates[category]);
                unitFrom.innerHTML = units.map(unit => `<option value="${unit}">${unit}</option>`).join('');
                unitTo.innerHTML = units.map(unit => `<option value="${unit}">${unit}</option>`).join('');
                convertUnits();
            };

            const convertUnits = () => {
                const amount = parseFloat(unitAmount.value);
                const category = unitCategory.value;
                const from = unitFrom.value;
                const to = unitTo.value;

                if (isNaN(amount) || !from || !to) {
                    unitResult.textContent = 'Please enter a valid amount.';
                    return;
                }

                const amountInBase = amount / unitRates[category][from];
                const result = amountInBase * unitRates[category][to];
                unitResult.textContent = `${amount} ${from} = ${parseFloat(result.toFixed(6))} ${to}`;
            };

            unitCategory.addEventListener('change', updateUnitDropdowns);
            unitAmount.addEventListener('input', convertUnits);
            unitFrom.addEventListener('change', convertUnits);
            unitTo.addEventListener('change', convertUnits);
            updateUnitDropdowns();

            // --- Currency Converter Logic ---
            let currencyRates = {};

            const fetchCurrencies = async () => {
                currencyResult.textContent = 'Loading rates...';
                try {
                    const response = await fetch('https://open.er-api.com/v6/latest/USD');
                    const data = await response.json();
                    if (data.result === 'success') {
                        currencyRates = data.rates;
                        const currencies = Object.keys(currencyRates);
                        const optionsHtml = currencies.map(currency => `<option value="${currency}">${currency}</option>`).join('');
                        currencyFrom.innerHTML = optionsHtml;
                        currencyTo.innerHTML = optionsHtml;
                        currencyFrom.value = 'USD';
                        currencyTo.value = 'EUR';
                        convertCurrency();
                    } else {
                        currencyResult.textContent = 'Failed to load currency rates. Please try again later.';
                    }
                } catch (e) {
                    currencyResult.textContent = 'Error fetching rates. Check your connection.';
                }
            };

            const convertCurrency = () => {
                const amount = parseFloat(currencyAmount.value);
                const from = currencyFrom.value;
                const to = currencyTo.value;

                if (isNaN(amount) || !from || !to || !currencyRates[from] || !currencyRates[to]) {
                    currencyResult.textContent = 'Please enter a valid amount.';
                    return;
                }

                const amountInUSD = amount / currencyRates[from];
                const result = amountInUSD * currencyRates[to];
                currencyResult.textContent = `${amount.toFixed(2)} ${from} = ${result.toFixed(2)} ${to}`;
            };

            currencyAmount.addEventListener('input', convertCurrency);
            currencyFrom.addEventListener('change', convertCurrency);
            currencyTo.addEventListener('change', convertCurrency);
            fetchCurrencies();
        });
    </script>
</body>

</html>
